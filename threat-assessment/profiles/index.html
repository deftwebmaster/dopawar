<!DOCTYPE html>
<html lang="en">
<!-- * lone wolf, no leash | Matt Livingston -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Enemy Profiles | Dopamine War</title>
  <meta name="description" content="Intelligence dossiers on the forces hijacking your reward system. Know your enemy.">
  
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../styles.css">
  
  <style>
    /* Profiles page styles */
    .profiles-hero {
      padding: var(--space-2xl) 0;
      border-bottom: 1px solid var(--color-border);
      margin-bottom: var(--space-xl);
    }
    
    .profiles-hero__label {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--color-accent);
      margin-bottom: var(--space-sm);
    }
    
    .profiles-hero__title {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: var(--space-md);
    }
    
    .profiles-hero__description {
      font-size: 1.125rem;
      color: var(--color-text-secondary);
      max-width: 600px;
    }
    
    /* Profile Grid */
    .profile-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-lg);
      margin-bottom: var(--space-2xl);
    }
    
    @media (max-width: 900px) {
      .profile-grid {
        grid-template-columns: 1fr;
      }
    }
    
    /* Profile Card */
    .profile-card {
      background: var(--color-bg-card);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      overflow: hidden;
      transition: border-color var(--transition-fast);
    }
    
    .profile-card:hover {
      border-color: var(--color-border-hover);
    }
    
    .profile-card__header {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      padding: var(--space-lg);
      border-bottom: 1px solid var(--color-border);
      background: var(--color-bg-elevated);
    }
    
    .profile-card__icon {
      font-size: 2rem;
      width: 56px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--color-bg);
      border-radius: var(--radius-md);
    }
    
    .profile-card__title-group {
      flex: 1;
    }
    
    .profile-card__name {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.125rem;
    }
    
    .profile-card__tagline {
      font-size: 0.8125rem;
      color: var(--color-text-muted);
    }
    
    .profile-card__threat {
      text-align: right;
    }
    
    .profile-card__threat-label {
      font-family: var(--font-mono);
      font-size: 0.625rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-muted);
      margin-bottom: 0.25rem;
    }
    
    .profile-card__threat-score {
      font-family: var(--font-mono);
      font-size: 1.5rem;
      font-weight: 700;
    }
    
    .profile-card__threat-score.critical { color: var(--color-critical); }
    .profile-card__threat-score.high { color: var(--color-high); }
    .profile-card__threat-score.moderate { color: var(--color-moderate); }
    .profile-card__threat-score.low { color: var(--color-low); }
    .profile-card__threat-score.secure { color: var(--color-secure); }
    .profile-card__threat-score.unknown { color: var(--color-text-muted); }
    
    .profile-card__body {
      padding: var(--space-lg);
    }
    
    .profile-section {
      margin-bottom: var(--space-lg);
    }
    
    .profile-section:last-child {
      margin-bottom: 0;
    }
    
    .profile-section__title {
      font-family: var(--font-mono);
      font-size: 0.6875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--color-accent);
      margin-bottom: var(--space-sm);
    }
    
    .profile-section__content {
      font-size: 0.875rem;
      color: var(--color-text-secondary);
      line-height: 1.6;
    }
    
    .profile-section__list {
      list-style: none;
      font-size: 0.875rem;
      color: var(--color-text-secondary);
    }
    
    .profile-section__list li {
      padding-left: 1rem;
      position: relative;
      margin-bottom: 0.375rem;
    }
    
    .profile-section__list li::before {
      content: 'â†’';
      position: absolute;
      left: 0;
      color: var(--color-text-muted);
    }
    
    /* Withdrawal Timeline */
    .withdrawal-timeline {
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
    }
    
    .withdrawal-item {
      display: flex;
      gap: var(--space-md);
      font-size: 0.8125rem;
    }
    
    .withdrawal-item__time {
      font-family: var(--font-mono);
      font-weight: 500;
      color: var(--color-text);
      min-width: 80px;
    }
    
    .withdrawal-item__desc {
      color: var(--color-text-secondary);
    }
    
    /* Declassified badge */
    .declassified-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      font-family: var(--font-mono);
      font-size: 0.625rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 0.25rem 0.5rem;
      background: var(--color-accent-muted);
      border: 1px solid var(--color-accent);
      border-radius: var(--radius-sm);
      color: var(--color-accent);
    }
    
    /* CTA to War Room */
    .profiles-cta {
      text-align: center;
      padding: var(--space-xl);
      background: var(--color-bg-card);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
    }
    
    .profiles-cta__title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: var(--space-sm);
    }
    
    .profiles-cta__text {
      color: var(--color-text-secondary);
      margin-bottom: var(--space-lg);
    }
    
    @media (max-width: 640px) {
      .profiles-hero__title {
        font-size: 2rem;
      }
      
      .profile-card__header {
        flex-wrap: wrap;
      }
      
      .profile-card__threat {
        width: 100%;
        text-align: left;
        margin-top: var(--space-sm);
        padding-top: var(--space-sm);
        border-top: 1px solid var(--color-border);
      }
    }

    /* â”€â”€ Archetype Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .archetype-card {
      background: var(--color-bg-card);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      margin-bottom: var(--space-xl);
      overflow: hidden;
      transition: border-color var(--transition-fast);
    }

    .archetype-card--match {
      border-color: var(--color-accent);
    }

    .archetype-card__header {
      display: flex;
      align-items: flex-start;
      gap: var(--space-md);
      padding: var(--space-lg);
      background: var(--color-bg-elevated);
      border-bottom: 1px solid var(--color-border);
    }

    .archetype-card__icon {
      font-size: 2.5rem;
      line-height: 1;
      flex-shrink: 0;
    }

    .archetype-card__meta {
      min-height: 1.25rem;
      margin-bottom: 0.25rem;
    }

    .archetype-match-badge {
      display: inline-block;
      font-family: var(--font-mono);
      font-size: 0.65rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--color-accent);
      background: rgba(220,38,38,0.12);
      border: 1px solid var(--color-accent);
      padding: 0.2rem 0.5rem;
      border-radius: var(--radius-sm);
    }

    .archetype-card__name {
      font-size: 1.375rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }

    .archetype-card__tagline {
      font-size: 0.875rem;
      color: var(--color-text-muted);
      font-style: italic;
    }

    .archetype-card__body {
      padding: var(--space-lg);
    }

    .archetype-card__description {
      font-size: 0.9375rem;
      color: var(--color-text-secondary);
      line-height: 1.7;
      margin-bottom: var(--space-lg);
    }

    .archetype-card__section-label {
      font-family: var(--font-mono);
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--color-accent);
      margin-bottom: var(--space-md);
      padding-bottom: var(--space-sm);
      border-bottom: 1px solid var(--color-border);
    }

    .archetype-interventions {
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
      margin-bottom: var(--space-lg);
    }

    .archetype-intervention {
      display: grid;
      grid-template-columns: 1fr 24px 1fr;
      gap: var(--space-sm);
      align-items: start;
      padding: var(--space-md);
      background: var(--color-bg);
      border-radius: var(--radius-md);
      font-size: 0.875rem;
    }

    .archetype-intervention__label {
      display: block;
      font-family: var(--font-mono);
      font-size: 0.65rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-text-muted);
      margin-bottom: 0.25rem;
    }

    .archetype-intervention__trigger {
      color: var(--color-text-secondary);
      line-height: 1.5;
    }

    .archetype-intervention__arrow {
      color: var(--color-accent);
      font-weight: 700;
      padding-top: 1.1rem;
      text-align: center;
    }

    .archetype-intervention__change {
      color: var(--color-text);
      line-height: 1.5;
    }

    .archetype-card__actions {
      padding-top: var(--space-md);
      border-top: 1px solid var(--color-border);
    }

    @media (max-width: 640px) {
      .archetype-intervention {
        grid-template-columns: 1fr;
      }
      .archetype-intervention__arrow {
        padding-top: 0;
        text-align: left;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="container header__inner">
      <a href="/threat-assessment/" class="header__logo">DOPAMINE WAR</a>
      <nav class="header__nav">
        <a href="/threat-assessment/war-room/" class="header__link">War Room</a>
        <a href="/threat-assessment/profiles/" class="header__link header__link--active">Enemy Intel</a>
        <a href="/threat-assessment/declassified/" class="header__link">Declassified</a>
      </nav>
    </div>
  </header>
  
  <main>
    <div class="container">
      <section class="profiles-hero">
        <p class="profiles-hero__label">Pattern Archetypes</p>
        <h1 class="profiles-hero__title">Identify Your Pattern</h1>
        <p class="profiles-hero__description">
          Compulsive loops aren't random. They follow predictable architectures. 
          Identify which pattern is running your behavior â€” then get the system template designed to interrupt it.
        </p>
      </section>
      
      <div id="archetypeMatch" style="display:none;" class="card" style="margin-bottom:2rem;">
        <!-- Populated by JS if audit is complete -->
      </div>
      
      <div id="archetypeGrid">
        <!-- Populated by JS -->
      </div>
      
      <div class="profiles-cta" id="profilesCta">
        <h2 class="profiles-cta__title">Ready to fight back?</h2>
        <p class="profiles-cta__text">Take the threat assessment and get your personalized battle plan.</p>
        <a href="/threat-assessment/" class="btn btn--primary btn--large">Assess My Control</a>
      </div>
    </div>
  </main>
  
  <footer class="footer">
    <div class="container">
      <p class="footer__text">Dopamine War â€” Strategic Systems Lab &nbsp;Â·&nbsp; Design systems that make impulses irrelevant.</p>
    </div>
  </footer>
  
  <script src="../app.js"></script>
  <script>

    // â”€â”€ Archetype definitions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const ARCHETYPES = [
      {
        id: 'signal-seeker',
        name: 'Signal Seeker',
        icon: 'ðŸ“¡',
        tagline: 'Constant input. Compulsive refresh. Never quite satisfied.',
        description: 'You cycle through feeds, tabs, and notifications looking for something â€” a hit of novelty, validation, or news. The signal never fully satisfies, so the loop continues. High social and news scores are the tell.',
        fronts: ['social', 'news'],
        matchLogic: scores => (scores.social || 0) >= 50 || (scores.news || 0) >= 50,
        interventions: [
          { trigger: 'Idle moment or task transition', change: 'Close all tabs before switching contexts. Reopen only what you need.' },
          { trigger: 'Phone in hand with no specific purpose', change: 'Set a single daily "signal window" â€” 15 minutes, then put it down.' },
          { trigger: 'Anxiety about missing something', change: 'Ask: what would actually change if I didn't see this? Usually nothing. Log that answer.' },
          { trigger: 'Multiple tabs open simultaneously', change: 'One tab rule during focused work. Use a tab manager to park the rest.' },
        ],
        loopMapFront: 'social',
      },
      {
        id: 'relief-chaser',
        name: 'Relief Chaser',
        icon: 'ðŸ§¯',
        tagline: 'Stress in. Dopamine hit out. Repeat.',
        description: 'Your loops are stress-discharge mechanisms. When pressure builds â€” emotional, physical, social â€” you reach for something that numbs or resets. Sugar, gaming, shopping, or alcohol all fit this pattern. The relief is real but temporary, and the loop tightens over time.',
        fronts: ['sugar', 'gaming', 'shopping'],
        matchLogic: scores => {
          const high = ['sugar','gaming','shopping'].filter(f => (scores[f] || 0) >= 50);
          return high.length >= 2;
        },
        interventions: [
          { trigger: 'Stress spike or emotional overload', change: 'Install a 90-second physical intercept: stand up, move, drink water before any other action.' },
          { trigger: 'End of a hard day or task', change: 'Design a deliberate decompression ritual that doesn't involve a screen or consumable.' },
          { trigger: 'Visible trigger nearby (snack, phone, game)', change: 'Remove proximity. Reorganize your environment so the default action requires effort.' },
          { trigger: 'Feeling of earned reward after effort', change: 'Replace the consumable reward with a restorative one â€” walk, shower, music, rest.' },
        ],
        loopMapFront: 'sugar',
      },
      {
        id: 'escape-architect',
        name: 'Escape Architect',
        icon: 'ðŸšª',
        tagline: 'Reality gets heavy. The exit is always one click away.',
        description: 'You've built efficient systems for leaving the present moment. Gaming, doomscrolling, and porn are common exits. The behavior isn't about pleasure â€” it's about disappearing. Duration matters more than intensity. Sessions run long, and returning to the real environment feels harder each time.',
        fronts: ['gaming', 'porn', 'news'],
        matchLogic: scores => (scores.gaming || 0) >= 60 || (scores.porn || 0) >= 40,
        interventions: [
          { trigger: 'Feeling of dread or low-grade anxiety before a task', change: 'Name the thing you're avoiding. Write it down. That act alone disrupts the escape reflex.' },
          { trigger: 'Long unstructured blocks of time', change: 'Structure time in 90-minute units with defined outputs. Ambiguity is the trigger.' },
          { trigger: 'Session that runs longer than planned', change: 'Set a physical alarm â€” not a phone alarm. When it goes off, leave the space entirely.' },
          { trigger: 'Returning from a session feeling worse', change: 'Log the gap between expected and actual feeling after each session. Data kills the illusion.' },
        ],
        loopMapFront: 'gaming',
      },
      {
        id: 'fuel-dependent',
        name: 'Fuel Dependent',
        icon: 'âš—ï¸',
        tagline: 'Running on borrowed energy. The debt compounds.',
        description: 'Your baseline functioning depends on external inputs â€” caffeine primarily, sometimes sugar or stimulants. You've calibrated your system around substances rather than sleep and recovery. Withdrawal isn't a crisis â€” it's Tuesday morning. The dependency is so normalized it's invisible.',
        fronts: ['caffeine', 'sugar'],
        matchLogic: scores => (scores.caffeine || 0) >= 50,
        interventions: [
          { trigger: 'Unable to start the day without caffeine', change: 'Delay first caffeine 90 minutes after waking. Let cortisol do its job before supplementing.' },
          { trigger: 'Afternoon slump requiring a second dose', change: 'The slump is sleep debt. Address the debt, not the symptom. Hard noon cutoff.' },
          { trigger: 'Headache or fog when caffeine is skipped', change: 'That's withdrawal, not a caffeine deficiency. Taper 25% per week to reset baseline.' },
          { trigger: 'Sugar + caffeine stacked to push through fatigue', change: 'Stacking is a compounding loan. One hour of real sleep replaces both â€” protect it.' },
        ],
        loopMapFront: 'caffeine',
      },
      {
        id: 'risk-runner',
        name: 'Risk Runner',
        icon: 'ðŸŽ²',
        tagline: 'The thrill is the product. Loss is just the cost of playing.',
        description: 'You're drawn to variable outcomes â€” gambling, day trading, speculation, high-stakes decisions. The near-miss activates your reward system almost as powerfully as the win. Skill and chance blur together. You may frame it as strategy, but the neurological signature is identical to slot machine behavior.',
        fronts: ['gambling'],
        matchLogic: scores => (scores.gambling || 0) >= 40,
        interventions: [
          { trigger: 'Near-miss or "almost had it" outcome', change: 'Near-misses are engineered. Document them. Seeing the pattern destroys the illusion of almost-winning.' },
          { trigger: 'Financial loss followed by urge to recover it', change: 'Chasing is the most reliable signal that control is gone. Define a hard stop loss before any session.' },
          { trigger: 'Rationalization that this time is different', change: 'Write out the rationalization. Reading it back breaks the spell faster than willpower.' },
          { trigger: 'Excitement spike when checking prices or odds', change: 'That spike is the product being sold. Automate investments and remove the action loop.' },
        ],
        loopMapFront: 'gambling',
      },
      {
        id: 'baseline-stable',
        name: 'Baseline Stable',
        icon: 'ðŸ§±',
        tagline: 'Systems are holding. Maintain the architecture.',
        description: 'Your current scores don't indicate active loop dominance across major fronts. That's not an accident â€” it's the result of structural constraints, good defaults, or deliberate friction. The work now is maintenance: auditing for creep, identifying weak points before they activate, and keeping the environment clean.',
        fronts: [],
        matchLogic: scores => {
          const vals = Object.values(scores);
          if (vals.length === 0) return true;
          return vals.every(v => v < 40);
        },
        interventions: [
          { trigger: 'Complacency during low-stress periods', change: 'Run a monthly audit. Baseline stability is a system output, not a character trait.' },
          { trigger: 'Stress period approaching (deadlines, transitions)', change: 'Pre-load friction on your highest-risk front before the stress hits, not after.' },
          { trigger: 'One front starting to creep', change: 'Address it at 20 â€” not at 60. Early intervention costs almost nothing.' },
          { trigger: 'Social pressure to engage with a loop', change: 'Your defaults are your defense. Don't renegotiate them under social pressure.' },
        ],
        loopMapFront: 'social',
      },
    ];

    // â”€â”€ Match user to archetypes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function matchArchetypes(scores) {
      const matched = ARCHETYPES.filter(a => a.matchLogic(scores));
      // Always return at least baseline-stable
      if (matched.length === 0) return [ARCHETYPES.find(a => a.id === 'baseline-stable')];
      // Don't show baseline-stable if other archetypes matched
      return matched.filter(a => a.id !== 'baseline-stable');
    }

    // â”€â”€ Render â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderArchetypes() {
      const grid = document.getElementById('archetypeGrid');
      const scores = DW.audit.isComplete() ? DW.audit.getScores() : {};
      const hasScores = Object.keys(scores).length > 0;
      const matched = hasScores ? matchArchetypes(scores) : ARCHETYPES;

      // If we have scores, show match banner
      if (hasScores && matched.length > 0 && matched[0].id !== 'baseline-stable') {
        const matchBanner = document.getElementById('archetypeMatch');
        matchBanner.style.display = 'block';
        matchBanner.style.cssText = 'display:block; background:var(--color-bg-card); border:1px solid var(--color-accent); border-radius:8px; padding:1.5rem; margin-bottom:2rem;';
        matchBanner.innerHTML = `
          <div style="font-family:var(--font-mono);font-size:0.7rem;letter-spacing:0.12em;text-transform:uppercase;color:var(--color-accent);margin-bottom:0.5rem;">Your Pattern Match</div>
          <div style="font-size:1.125rem;font-weight:600;margin-bottom:0.25rem;">${matched.map(a => a.icon + ' ' + a.name).join(' Â· ')}</div>
          <div style="font-size:0.875rem;color:var(--color-text-secondary);">Based on your assessment scores. Scroll down to see your system templates.</div>
        `;
      }

      grid.innerHTML = ARCHETYPES.map((archetype, i) => {
        const isMatch = hasScores && matched.find(a => a.id === archetype.id);
        const interventionsHTML = archetype.interventions.map(iv => `
          <div class="archetype-intervention">
            <div class="archetype-intervention__trigger">
              <span class="archetype-intervention__label">Trigger</span>
              ${iv.trigger}
            </div>
            <div class="archetype-intervention__arrow">â†’</div>
            <div class="archetype-intervention__change">
              <span class="archetype-intervention__label">System change</span>
              ${iv.change}
            </div>
          </div>
        `).join('');

        return `
          <article class="archetype-card ${isMatch ? 'archetype-card--match' : ''}">
            <div class="archetype-card__header">
              <div class="archetype-card__icon">${archetype.icon}</div>
              <div class="archetype-card__title-group">
                <div class="archetype-card__meta">
                  ${isMatch ? '<span class="archetype-match-badge">Your Pattern</span>' : ''}
                </div>
                <h2 class="archetype-card__name">${archetype.name}</h2>
                <p class="archetype-card__tagline">${archetype.tagline}</p>
              </div>
            </div>
            <div class="archetype-card__body">
              <p class="archetype-card__description">${archetype.description}</p>
              <div class="archetype-card__section-label">System Templates</div>
              <div class="archetype-interventions">${interventionsHTML}</div>
              <div class="archetype-card__actions">
                <a href="/loop-map/?front=${archetype.loopMapFront}&label=${encodeURIComponent(archetype.name + ' loop')}" class="btn btn--secondary" style="font-size:0.8125rem;padding:0.5rem 1rem;">
                  Map this as a loop â†’
                </a>
              </div>
            </div>
          </article>
        `;
      }).join('');
    }

    function updateCTA() {
      const cta = document.getElementById('profilesCta');
      if (DW.audit.isComplete()) {
        cta.innerHTML = `
          <h2 class="profiles-cta__title">Field Report is active</h2>
          <p class="profiles-cta__text">See your full control breakdown and tactical interventions.</p>
          <a href="/threat-assessment/war-room/" class="btn btn--primary btn--large">Show Me Tactics</a>
        `;
      }
    }

    renderArchetypes();
    updateCTA();
  </script>
</body>
</html>
